<body>
<h3>New Project</h3>
<hr/>
<p>
    <!--New Project Name:
    <div class="input-control text bg-red">
        <input type="text input-control full-size" placeholder="Type the name of your project ...">
    </div>-->
    
    <form data-role="validator" 
            data-on-submit="createNewProject"
            data-on-error-input="notifyOnErrorInput"
            data-show-error-hint="false">
    <!--<div class="grid">
        <div class="row cells1">
            <div class="cell">-->
                <label>Project Name</label>
                <div class="input-control text full-size">
                    <input type="text" id="txtPrjName" 
                                        data-validate-func="required" 
                                        data-validate-hint="Project name cannot be empty">
                    <span class="input-state-error mif-warning"></span>
                    <span class="input-state-success mif-checkmark"></span>
                </div>
        <!--</div>
        </div>
    </div>-->
    

    <div class="form-actions" style="margin-top:30px;">
        <button class="button primary" onclick="metroDialog.close('#NewProjectDialog');">Cancel</button>
        <button class="button primary success">Create</button>
    </div>
    <script>
        function createNewProject(){
            var prjName = $("#txtPrjName").val();
            var userId = window.sessionStorage.getItem("userId");
            
            addProject(userId, prjName);

            var newPrjId = window.sessionStorage.getItem("projectId");
            if(newPrjId==undefined || newPrjId==-1 || newPrjId==null)
                $.Notify({
                    caption: 'Error',
                    content: 'Could not create new project.',
                    type:    'alert'
                });
            else{
                $.Notify({
                    caption: 'New Project',
                    content: 'Project <i>' + prjName + '</i> successfully created.',
                    type:    'success'
                });
            }
            metroDialog.close("#NewProjectDialog");
        }
        function notifyOnErrorInput(input){
        var message = input.data('validateHint');
        $.Notify({
            caption: 'Error',
            content: message,
            type: 'alert'
        });
    }
    </script>

    </form>
</p>
</body>