<body>
<h3>New Project</h3>
<hr/>
<div class="m-5">
    <script>
        function createNewProject(){
            var prjName = $("#txtPrjName").val();
            var userId = window.sessionStorage.getItem("userId");
            
            addProject(userId, prjName);

            var newPrjId = window.sessionStorage.getItem("projectId");
            if(newPrjId==undefined || newPrjId==-1 || newPrjId==null)
                Metro.notify.create({
					'Could not create new project.',
					'Alert',
                    {
						cls: "alert"
					}
                });
            else{
				Metro.notify.create({
					'Project <i>' + prjName + '</i> successfully created.',
					'New Project',
                    {
						cls: "success"
					}
                });
            }
            Metro.dialog.close("#NewProjectDialog");
        }
        function notifyOnErrorInput(input){
        var message = input.data('validateHint');
		Metro.notify.create({
			message,
			'Error',
			{
				cls: "alert"
			}
		});
    }
    </script>
    <form data-role="validator" 
			action="javascript:"
            data-on-submit='createNewProject'
	>
		<label>Project Name</label>
		<div class="input-control text full-size">
			<input type="text" id="txtPrjName" 
								data-validate="required minlength=1">
			<span class="invalid_feedback">
				Project name cannot be empty
			</span>
			<!--<span class="input-state-error mif-warning"></span>
			<span class="input-state-success mif-checkmark"></span>-->
		</div>
    

		<div class="form-actions" style="margin-top:30px;">
			<button class="button primary" onclick="Metro.infobox.close($(this).closest('.info-box').attr('id'));">Cancel</button>
			<button class="button primary success">Create</button>
		</div>
    

    </form>
</div>
</body>